---
name: requirements-analysis
description: 需求分析文档创建技能。当用户告知"需要开始一个新需求"时触发。该技能会创建 .requirementsAnalysis 文件夹、更新 .gitignore、按序号命名创建需求目录，并生成包含需求背景、需求内容、代码实施计划的需求文档。完成后与用户确认内容，确认后开始代码实施。
---

# 需求分析文档创建

当用户表示需要开始一个新需求时，执行以下流程创建需求分析文档。

## 执行流程

### 1. 检查并创建 .requirementsAnalysis 文件夹

检查项目根目录是否存在 `.requirementsAnalysis` 文件夹：

```bash
ls -la .requirementsAnalysis 2>/dev/null || mkdir -p .requirementsAnalysis
```

### 2. 更新 .gitignore

检查 `.gitignore` 文件是否包含 `.requirementsAnalysis`，如果没有则添加：

```bash
grep -q "^\.requirementsAnalysis" .gitignore 2>/dev/null || echo ".requirementsAnalysis" >> .gitignore
```

### 3. 创建需求目录

按照 `001-xxxx` 的命名格式创建新需求目录：

1. 查看现有需求目录，确定下一个序号
2. 向用户询问需求简短名称（用于目录命名）
3. 创建目录，格式：`{序号}-{需求简称}`

示例：
```
.requirementsAnalysis/
├── 001-user-login/
├── 002-payment-integration/
└── 003-new-feature/
```

### 4. 创建需求文档

在新创建的需求目录下创建 `requirements.md` 文档，包含以下三个部分：

```markdown
# {需求名称}

## 需求背景

{描述需求产生的背景、业务场景、问题痛点等}

## 需求内容

{详细描述需求的具体内容、功能点、业务规则等}

### 功能点清单

- [ ] 功能点 1
- [ ] 功能点 2
- [ ] ...

## 代码实施计划

{描述代码实现的整体方案、涉及的模块、改动范围等}

### 改动文件清单

| 文件路径 | 改动类型 | 改动说明 |
|---------|---------|---------|
| path/to/file | 新增/修改 | 说明 |

### 实施步骤

1. 步骤 1
2. 步骤 2
3. ...
```

### 5. 与用户确认

文档创建完成后，向用户展示文档内容并确认：

```markdown
📝 需求分析文档已创建

**文档位置**: .requirementsAnalysis/{序号}-{需求简称}/requirements.md

请确认以下事项：
1. 文档内容是否需要修改？
2. 是否需要补充其他文件或内容？

请查看文档内容并告知是否需要调整，确认无误后我将开始按照文档进行代码改造实施。
```

### 6. 开始代码实施

收到用户最终确认后：

1. 重新阅读需求文档，确保理解正确
2. 按照代码实施计划开始进行代码改造
3. 每完成一个功能点，在文档中勾选对应项

## 注意事项

1. 需求目录序号必须是三位数字，不足补零（如 001、002、010）
2. 目录名使用小写字母和连字符，避免空格和特殊字符
3. 需求文档应当尽可能详细，便于后续代码评审参考
4. 与用户确认时要等待明确回复，不要自行假设已确认